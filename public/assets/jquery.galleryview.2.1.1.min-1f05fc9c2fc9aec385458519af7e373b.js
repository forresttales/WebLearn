var window_loaded=!1;!function(t){t.fn.galleryView=function(e){function a(e){if(t(".nav-next-overlay",R).unbind("click"),t(".nav-prev-overlay",R).unbind("click"),t(".nav-next",R).unbind("click"),t(".nav-prev",R).unbind("click"),W.unbind("click"),S.show_filmstrip&&(W.removeClass("current").find("img").stop().animate({opacity:S.frame_opacity},S.transition_speed),W.eq(e).addClass("current").find("img").stop().animate({opacity:1},S.transition_speed)),S.show_panels&&S.fade_panels&&j.fadeOut(S.transition_speed).eq(e%H).fadeIn(S.transition_speed,function(){S.show_filmstrip||(t(".nav-prev-overlay",R).click(r),t(".nav-next-overlay",R).click(s),t(".nav-prev",R).click(r),t(".nav-next",R).click(s))}),S.show_filmstrip)if("strip"==g){L.stop();var i,a;"horizontal"==B?(i=l(W[e]).left-(l(P[0]).left+b/2-C/2),a=(i>=0?"-=":"+=")+Math.abs(i)+"px",L.animate({left:a},S.transition_speed,S.easing,function(){var i=e;e>H?(e%=H,V=e,L.css("left","-"+(C+S.frame_gap)*e+"px")):H-strip_size>=e&&(e=e%H+H,V=e,L.css("left","-"+(C+S.frame_gap)*e+"px")),i!=e&&(W.eq(i).removeClass("current").find("img").css({opacity:S.frame_opacity}),W.eq(e).addClass("current").find("img").css({opacity:1})),S.fade_panels||j.hide().eq(e%H).show(),t(".nav-prev-overlay",R).click(r),t(".nav-next-overlay",R).click(s),t(".nav-prev",R).click(r),t(".nav-next",R).click(s),h()})):(i=l(W[e]).top-(l(P[0]).top+y-M/2),a=(i>=0?"-=":"+=")+Math.abs(i)+"px",L.animate({top:a},S.transition_speed,S.easing,function(){var i=e;e>H?(e%=H,V=e,L.css("top","-"+(M+S.frame_gap)*e+"px")):H-strip_size>=e&&(e=e%H+H,V=e,L.css("top","-"+(M+S.frame_gap)*e+"px")),i!=e&&(W.eq(i).removeClass("current").find("img").css({opacity:S.frame_opacity}),W.eq(e).addClass("current").find("img").css({opacity:1})),S.fade_panels||j.hide().eq(e%H).show(),t(".nav-prev-overlay",R).click(r),t(".nav-next-overlay",R).click(s),t(".nav-prev",R).click(r),t(".nav-next",R).click(s),h()}))}else if("pointer"==g){P.stop();var o=l(W[e]);"horizontal"==B?P.animate({left:o.left+C/2-b/2+"px"},S.transition_speed,S.easing,function(){S.fade_panels||j.hide().eq(e%H).show(),t(".nav-prev-overlay",R).click(r),t(".nav-next-overlay",R).click(s),t(".nav-prev",R).click(r),t(".nav-next",R).click(s),h()}):P.animate({top:o.top+M/2-y+"px"},S.transition_speed,S.easing,function(){S.fade_panels||j.hide().eq(e%H).show(),t(".nav-prev-overlay",R).click(r),t(".nav-next-overlay",R).click(s),t(".nav-prev",R).click(r),t(".nav-next",R).click(s),h()})}}function o(t){if(!t)return 0;if(0==t.length)return 0;t=t.eq(0);var e=0;return e+=m(t.css("paddingLeft")),e+=m(t.css("paddingRight")),e+=m(t.css("borderLeftWidth")),e+=m(t.css("borderRightWidth"))}function n(t){if(!t)return 0;if(0==t.length)return 0;t=t.eq(0);var e=0;return e+=m(t.css("paddingTop")),e+=m(t.css("paddingBottom")),e+=m(t.css("borderTopWidth")),e+=m(t.css("borderBottomWidth"))}function s(){t(document).stopTime("transition"),++V==W.length&&(V=0),a(V),N||t(document).everyTime(S.transition_interval,"transition",function(){s()})}function r(){t(document).stopTime("transition"),--V<0&&(V=H-1),a(V),N||t(document).everyTime(S.transition_interval,"transition",function(){s()})}function l(t){var e=0,i=0,a=t.id;if(t.offsetParent)do e+=t.offsetLeft,i+=t.offsetTop;while(t=t.offsetParent);if(a==v)return{left:e,top:i};var o=l(R[0]),n=o.left,s=o.top;return{left:e-n,top:i-s}}function h(){W.each(function(e){0==t("a",this).length&&t(this).click(function(){V!=e&&(t(document).stopTime("transition"),a(e),V=e,N||t(document).everyTime(S.transition_interval,"transition",function(){s()}))})})}function c(){j.each(function(){t(".panel-overlay",this).length>0&&t(this).append('<div class="overlay-background"></div>')}),S.show_filmstrip||(t("<img />").addClass("nav-next").attr("src",x+S.nav_theme+"/next.gif").appendTo(R).css({position:"absolute",zIndex:"1100",cursor:"pointer",top:(S.panel_height-22)/2+q+"px",right:"0px",display:"none"}).click(s),t("<img />").addClass("nav-prev").attr("src",x+S.nav_theme+"/prev.gif").appendTo(R).css({position:"absolute",zIndex:"1100",cursor:"pointer",top:(S.panel_height-22)/2+q+"px",left:"0px",display:"none"}).click(r),t("<img />").addClass("nav-next-overlay").attr("src",x+S.nav_theme+"/panel-nav-next.gif").appendTo(R).css({position:"absolute",zIndex:"1099",top:(S.panel_height-22)/2+q-10+"px",right:"0",display:"none",cursor:"pointer",opacity:.75}).click(s),t("<img />").addClass("nav-prev-overlay").attr("src",x+S.nav_theme+"/panel-nav-prev.gif").appendTo(R).css({position:"absolute",zIndex:"1099",top:(S.panel_height-22)/2+q-10+"px",left:"0",display:"none",cursor:"pointer",opacity:.75}).click(r)),j.each(function(){switch(t(this).css({width:S.panel_width-o(j)+"px",height:S.panel_height-n(j)+"px",position:"absolute",overflow:"hidden",display:"none"}),S.filmstrip_position){case"top":t(this).css({top:z+Math.max(q,I)+"px",left:q+"px"});break;case"left":t(this).css({top:q+"px",left:k+Math.max(q,I)+"px"});break;default:t(this).css({top:q+"px",left:q+"px"})}}),t(".panel-overlay",j).css({position:"absolute",zIndex:"999",width:S.panel_width-o(t(".panel-overlay",j))+"px",left:"0"}),t(".overlay-background",j).css({position:"absolute",zIndex:"998",width:S.panel_width+"px",left:"0",opacity:S.overlay_opacity}),"top"==S.overlay_position?(t(".panel-overlay",j).css("top",0),t(".overlay-background",j).css("top",0)):(t(".panel-overlay",j).css("bottom",0),t(".overlay-background",j).css("bottom",0)),t(".panel iframe",j).css({width:S.panel_width+"px",height:S.panel_height+"px",border:"0"}),E&&t("img",j).each(function(e){t(this).css({height:X[e%H]*Y[e%H],width:X[e%H]*D[e%H],position:"relative",top:(S.panel_height-X[e%H]*Y[e%H])/2+"px",left:(S.panel_width-X[e%H]*D[e%H])/2+"px"})})}function d(){switch(L.wrap('<div class="strip_wrapper"></div>'),"strip"==g&&(W.clone().appendTo(L),W.clone().appendTo(L),W=t("li",L)),S.show_captions&&W.append('<div class="caption"></div>').each(function(){t(this).find(".caption").html(t(this).find("img").attr("title"))}),L.css({listStyle:"none",margin:"0",padding:"0",width:k+"px",position:"absolute",zIndex:"900",top:("vertical"==B&&"strip"==g?-((M+S.frame_gap)*V):0)+"px",left:("horizontal"==B&&"strip"==g?-((C+S.frame_gap)*V):0)+"px",height:z+"px"}),W.css({"float":"left",position:"relative",height:M+(S.show_captions?A:0)+"px",width:C+"px",zIndex:"901",padding:"0",cursor:"pointer"}),S.filmstrip_position){case"top":W.css({marginBottom:I+"px",marginRight:S.frame_gap+"px"});break;case"bottom":W.css({marginTop:I+"px",marginRight:S.frame_gap+"px"});break;case"left":W.css({marginRight:I+"px",marginBottom:S.frame_gap+"px"});break;case"right":W.css({marginLeft:I+"px",marginBottom:S.frame_gap+"px"})}t(".img_wrap",W).each(function(e){t(this).css({height:Math.min(S.frame_height,Y[e%H]*Q[e%H])+"px",width:Math.min(S.frame_width,D[e%H]*Q[e%H])+"px",position:"relative",top:(S.show_captions&&"top"==S.filmstrip_position?A:0)+Math.max(0,(S.frame_height-Q[e%H]*Y[e%H])/2)+"px",left:Math.max(0,(S.frame_width-Q[e%H]*D[e%H])/2)+"px",overflow:"hidden"})}),t("img",W).each(function(e){t(this).css({opacity:S.frame_opacity,height:Y[e%H]*Q[e%H]+"px",width:D[e%H]*Q[e%H]+"px",position:"relative",top:Math.min(0,(S.frame_height-Q[e%H]*Y[e%H])/2)+"px",left:Math.min(0,(S.frame_width-Q[e%H]*D[e%H])/2)+"px"}).mouseover(function(){t(this).stop().animate({opacity:1},300)}).mouseout(function(){t(this).parent().parent().hasClass("current")||t(this).stop().animate({opacity:S.frame_opacity},300)})}),t(".strip_wrapper",R).css({position:"absolute",overflow:"hidden"}),"horizontal"==B?t(".strip_wrapper",R).css({top:"top"==S.filmstrip_position?Math.max(q,I)+"px":S.panel_height+q+"px",left:(u-T)/2+q+"px",width:T+"px",height:z+"px"}):t(".strip_wrapper",R).css({left:"left"==S.filmstrip_position?Math.max(q,I)+"px":S.panel_width+q+"px",top:Math.max(q,S.frame_gap)+"px",width:k+"px",height:wrapper_height+"px"}),t(".caption",R).css({position:"absolute",top:("bottom"==S.filmstrip_position?M:0)+"px",left:"0",margin:"0",width:C+"px",padding:"0",height:A+"px",overflow:"hidden",lineHeight:A+"px"});var e=t("<div></div>");e.addClass("pointer").appendTo(R).css({position:"absolute",zIndex:"1000",width:"0px",fontSize:"0px",lineHeight:"0%",borderTopWidth:y+"px",borderRightWidth:b/2+"px",borderBottomWidth:y+"px",borderLeftWidth:b/2+"px",borderStyle:"solid"});var i=t.browser.msie&&"6"==t.browser.version.substr(0,1)?"pink":"transparent";switch(S.show_panels||e.css("borderColor",i),S.filmstrip_position){case"top":e.css({bottom:S.panel_height-2*y+q+I+"px",left:(u-T)/2+("strip"==g?0:(C+S.frame_gap)*V)+(C/2-b/2)+q+"px",borderBottomColor:i,borderRightColor:i,borderLeftColor:i});break;case"bottom":e.css({top:S.panel_height-2*y+q+I+"px",left:(u-T)/2+("strip"==g?0:(C+S.frame_gap)*V)+(C/2-b/2)+q+"px",borderTopColor:i,borderRightColor:i,borderLeftColor:i});break;case"left":e.css({right:S.panel_width-b+q+I+"px",top:M/2-y+("strip"==g?0:(M+S.frame_gap)*V)+q+"px",borderBottomColor:i,borderRightColor:i,borderTopColor:i});break;case"right":e.css({left:S.panel_width-b+q+I+"px",top:M/2-y+("strip"==g?0:(M+S.frame_gap)*V)+q+"px",borderBottomColor:i,borderLeftColor:i,borderTopColor:i})}P=t(".pointer",R);var a=t("<img />");a.addClass("nav-next").attr("src",x+S.nav_theme+"/next.gif").appendTo(R).css({position:"absolute",cursor:"pointer"}).click(s);var o=t("<img />");o.addClass("nav-prev").attr("src",x+S.nav_theme+"/prev.gif").appendTo(R).css({position:"absolute",cursor:"pointer"}).click(r),"horizontal"==B?(a.css({top:("top"==S.filmstrip_position?Math.max(q,I):S.panel_height+I+q)+(M-22)/2+"px",right:(u+2*q)/2-T/2-S.frame_gap-22+"px"}),o.css({top:("top"==S.filmstrip_position?Math.max(q,I):S.panel_height+I+q)+(M-22)/2+"px",left:(u+2*q)/2-T/2-S.frame_gap-22+"px"})):(a.css({left:("left"==S.filmstrip_position?Math.max(q,I):S.panel_width+I+q)+(C-22)/2+13+"px",top:wrapper_height+2*Math.max(q,S.frame_gap)+"px"}),o.css({left:("left"==S.filmstrip_position?Math.max(q,I):S.panel_width+I+q)+(C-22)/2-13+"px",top:wrapper_height+2*Math.max(q,S.frame_gap)+"px"}))}function f(t,e){var i=l(R[0]),a=i.top,o=i.left;return t>o&&t<o+u+("horizontal"==B?2*q:q+Math.max(q,I))&&e>a&&e<a+w+("vertical"==B?2*q:q+Math.max(q,I))}function m(t){return t=parseInt(t,10),isNaN(t)&&(t=0),t}function _(){var e=S.show_filmstrip?t("img",W):t("img",j);e.each(function(t){Y[t]=this.height,D[t]=this.width,Q[t]="nocrop"==S.frame_scale?Math.min(S.frame_height/Y[t],S.frame_width/D[t]):Math.max(S.frame_height/Y[t],S.frame_width/D[t]),X[t]="nocrop"==S.panel_scale?Math.min(S.panel_height/Y[t],S.panel_width/D[t]):Math.max(S.panel_height/Y[t],S.panel_width/D[t])}),R.css({position:"relative",width:u+("horizontal"==B?2*q:q+Math.max(q,I))+"px",height:w+("vertical"==B?2*q:q+Math.max(q,I))+"px"}),S.show_filmstrip&&(d(),h()),S.show_panels&&c(),(S.pause_on_hover||S.show_panels&&!S.show_filmstrip)&&t(document).mousemove(function(e){f(e.pageX,e.pageY)?(S.pause_on_hover&&(N||t(document).oneTime(500,"animation_pause",function(){t(document).stopTime("transition"),N=!0})),!S.show_panels||S.show_filmstrip||F||(t(".nav-next-overlay").fadeIn("fast"),t(".nav-prev-overlay").fadeIn("fast"),t(".nav-next",R).fadeIn("fast"),t(".nav-prev",R).fadeIn("fast"),F=!0)):(S.pause_on_hover&&(t(document).stopTime("animation_pause"),N&&(t(document).everyTime(S.transition_interval,"transition",function(){s()}),N=!1)),S.show_panels&&!S.show_filmstrip&&F&&(t(".nav-next-overlay").fadeOut("fast"),t(".nav-prev-overlay").fadeOut("fast"),t(".nav-next",R).fadeOut("fast"),t(".nav-prev",R).fadeOut("fast"),F=!1))}),L.css("visibility","visible"),R.css("visibility","visible"),t(".loader",R).fadeOut("1000",function(){a(V),H>1&&t(document).everyTime(S.transition_interval,"transition",function(){s()})})}var v,g,x,u,w,y,b,k,z,T,C,M,q,I,B,R,L,W,O,j,P,S=t.extend(t.fn.galleryView.defaults,e),V=0,H=0,N=!1,A=20,Q={},X={},Y={},D={},E=!0,F=!1;return this.each(function(){if(t(this).css("visibility","hidden"),t(this).wrap("<div></div>"),R=t(this).parent(),R.css("visibility","hidden").attr("id",t(this).attr("id")).addClass("gallery"),t(this).removeAttr("id").addClass("filmstrip"),t(document).stopTime("transition"),t(document).stopTime("animation_pause"),v=R.attr("id"),E=0==t(".panel-content",R).length,y=S.pointer_size,b=2*S.pointer_size,B="top"==S.filmstrip_position||"bottom"==S.filmstrip_position?"horizontal":"vertical","vertical"==B&&(S.show_captions=!1),t("script").each(function(){var e=t(this);e.attr("src")&&e.attr("src").match(/jquery\.galleryview/)&&(loader_path=e.attr("src").split("jquery.galleryview")[0],x=e.attr("src").split("jquery.galleryview")[0]+"images/galleryviewthemes/")}),L=t(".filmstrip",R),W=t("li",L),W.addClass("frame"),S.show_panels)for(i=W.length-1;i>=0;i--)W.eq(i).find(".panel-content").length>0?W.eq(i).find(".panel-content").remove().prependTo(R).addClass("panel"):(p=t("<div>"),p.addClass("panel"),im=t("<img />"),im.attr("src",W.eq(i).find("img").eq(0).attr("src")).appendTo(p),p.prependTo(R),W.eq(i).find(".panel-overlay").remove().appendTo(p));else t(".panel-overlay",W).remove(),t(".panel-content",W).remove();S.show_filmstrip?(W.each(function(){t(this).find("a").length>0?t(this).find("a").wrap('<div class="img_wrap"></div>'):t(this).find("img").wrap('<div class="img_wrap"></div>')}),O=t(".img_wrap",W)):L.remove(),j=t(".panel",R),S.show_panels||(S.panel_height=0,S.panel_width=0),C=S.frame_width+o(O),M=S.frame_height+n(O),H=S.show_panels?j.length:W.length,strip_size="horizontal"==B?S.show_panels?Math.floor((S.panel_width-2*(S.frame_gap+22))/(C+S.frame_gap)):Math.min(H,S.filmstrip_size):S.show_panels?Math.floor((S.panel_height-(S.frame_gap+22))/(M+S.frame_gap)):Math.min(H,S.filmstrip_size),strip_size>=H?(g="pointer",strip_size=H):g="strip",V=(H>strip_size?H:0)+S.start_frame-1,I=S.show_panels?m(L.css("marginTop")):0,L.css("margin","0px"),"horizontal"==B?(u=S.show_panels?S.panel_width:strip_size*(C+S.frame_gap)+44+S.frame_gap,w=(S.show_panels?S.panel_height:0)+(S.show_filmstrip?M+I+(S.show_captions?A:0):0)):(w=S.show_panels?S.panel_height:strip_size*(M+S.frame_gap)+22,u=(S.show_panels?S.panel_width:0)+(S.show_filmstrip?C+I:0)),k="horizontal"==B?"pointer"==g?C*H+S.frame_gap*H:3*C*H+S.frame_gap*3*H:C+I,z="horizontal"==B?M+I+(S.show_captions?A:0):"pointer"==g?M*H+S.frame_gap*H:3*M*H+S.frame_gap*3*H,T=strip_size*C+(strip_size-1)*S.frame_gap,wrapper_height=strip_size*M+(strip_size-1)*S.frame_gap,q=m(R.css("paddingTop")),R.css("padding","0px"),galleryPos=l(R[0]),t("<div>").addClass("loader").css({position:"absolute",zIndex:"32666",opacity:1,top:"0px",left:"0px",width:u+("horizontal"==B?2*q:q+Math.max(q,I))+"px",height:w+("vertical"==B?2*q:q+Math.max(q,I))+"px"}).appendTo(R),window_loaded?_():t(window).load(function(){window_loaded=!0,_()})})},t.fn.galleryView.defaults={show_panels:!0,show_filmstrip:!0,panel_width:450,panel_height:320,frame_width:100,frame_height:70,start_frame:1,filmstrip_size:4,transition_speed:800,transition_interval:4e3,overlay_opacity:.7,frame_opacity:.3,pointer_size:0,nav_theme:"dark",easing:"swing",filmstrip_position:"bottom",overlay_position:"bottom",panel_scale:"nocrop",frame_scale:"crop",frame_gap:10,show_captions:!1,fade_panels:!0,pause_on_hover:!0}}(jQuery);